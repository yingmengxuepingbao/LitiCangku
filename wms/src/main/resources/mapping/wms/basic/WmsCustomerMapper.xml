<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.penghaisoft.wms.basicmanagement.model.dao.WmsCustomerMapper">
	
	<!-- =========================================================== -->
    <!-- 定义resultMap                                                                                                                                                                             -->
    <!-- =========================================================== -->
	<resultMap id="wmsCustomerMap" type="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
				<result property="customerId" column="customer_id"/>
				<result property="customerCode" column="customer_code"/>
				<result property="customerFullName" column="customer_full_name"/>
				<result property="customerShortName" column="customer_short_name"/>
				<result property="customerEngName" column="customer_eng_name"/>
				<result property="customerType" column="customer_type"/>
				<result property="customerLevel" column="customer_level"/>
				<result property="firstContractDate" column="first_contract_date"/>
				<result property="endContractDate" column="end_contract_date"/>
				<result property="address" column="address"/>
				<result property="contacts" column="contacts"/>
				<result property="website" column="website"/>
				<result property="registrationDate" column="registration_date"/>
				<result property="remark" column="remark"/>
				<result property="userDefined1" column="user_defined1"/>
				<result property="userDefined2" column="user_defined2"/>
				<result property="userDefined3" column="user_defined3"/>
				<result property="userDefined4" column="user_defined4"/>
				<result property="userDefined5" column="user_defined5"/>
				<result property="createBy" column="create_by"/>
				<result property="gmtCreate" column="gmt_create"/>
				<result property="lastModifiedBy" column="last_modified_by"/>
				<result property="gmtModified" column="gmt_modified"/>
				<result property="activeFlag" column="active_flag"/>
	</resultMap>
	
	<!-- =========================================================== -->
    <!-- 一些公共变量设置                                                                                                                                                                             -->
    <!-- =========================================================== -->
	<!-- mysql 分页 -->
	<sql id="pagination_tail">
		top ((#{page.pageOffset} +1)* #{page.rows})
	</sql>
	<!-- mysql 查询总数 -->
	<sql id="count_Tail">
		select count(1) from 
	</sql>
	
	<sql id="selectAllColumns">
		<![CDATA[
 			customer_id
 			,customer_code
 			,customer_full_name
 			,customer_short_name
 			,customer_eng_name
 			,customer_type
 			,customer_level
 			,first_contract_date
 			,end_contract_date
 			,address
 			,contacts
 			,website
 			,registration_date
 			,remark
 			,user_defined1
 			,user_defined2
 			,user_defined3
 			,user_defined4
 			,user_defined5
 			,create_by
 			,gmt_create
 			,last_modified_by
 			,gmt_modified
 			,active_flag
		FROM 
		wms_customer wms_customer_
		]]>
	</sql>
	
	<sql id="where_fragement">
		where 1=1
		<if test="entity!=null">
			<if test="entity.customerId != null  and entity.customerId !=''">
				<![CDATA[ and wms_customer_.customer_id  LIKE CONCAT('%',#{entity.customerId},'%')]]>
			</if>
			<if test="entity.customerCode != null  and entity.customerCode !=''">
				<![CDATA[ and wms_customer_.customer_code  LIKE CONCAT('%',#{entity.customerCode},'%')]]>
			</if>
			<if test="entity.customerFullName != null  and entity.customerFullName !=''">
				<![CDATA[ and wms_customer_.customer_full_name  LIKE CONCAT('%',#{entity.customerFullName},'%')]]>
			</if>
			<if test="entity.customerShortName != null  and entity.customerShortName !=''">
				<![CDATA[ and wms_customer_.customer_short_name  LIKE CONCAT('%',#{entity.customerShortName},'%')]]>
			</if>
			<if test="entity.customerEngName != null  and entity.customerEngName !=''">
				<![CDATA[ and wms_customer_.customer_eng_name  LIKE CONCAT('%',#{entity.customerEngName},'%')]]>
			</if>
			<if test="entity.customerType != null  and entity.customerType !=''">
				<![CDATA[ and wms_customer_.customer_type  LIKE CONCAT('%',#{entity.customerType},'%')]]>
			</if>
			<if test="entity.customerLevel != null  and entity.customerLevel !=''">
				<![CDATA[ and wms_customer_.customer_level  LIKE CONCAT('%',#{entity.customerLevel},'%')]]>
			</if>
			<if test="entity.firstContractDate != null  and entity.firstContractDate !=''">
				<![CDATA[ and wms_customer_.first_contract_date  LIKE CONCAT('%',#{entity.firstContractDate},'%')]]>
			</if>
			<if test="entity.endContractDate != null  and entity.endContractDate !=''">
				<![CDATA[ and wms_customer_.end_contract_date  LIKE CONCAT('%',#{entity.endContractDate},'%')]]>
			</if>
			<if test="entity.address != null  and entity.address !=''">
				<![CDATA[ and wms_customer_.address  LIKE CONCAT('%',#{entity.address},'%')]]>
			</if>
			<if test="entity.contacts != null  and entity.contacts !=''">
				<![CDATA[ and wms_customer_.contacts  LIKE CONCAT('%',#{entity.contacts},'%')]]>
			</if>
			<if test="entity.website != null  and entity.website !=''">
				<![CDATA[ and wms_customer_.website  LIKE CONCAT('%',#{entity.website},'%')]]>
			</if>
			<if test="entity.registrationDate != null  and entity.registrationDate !=''">
				<![CDATA[ and wms_customer_.registration_date  LIKE CONCAT('%',#{entity.registrationDate},'%')]]>
			</if>
			<if test="entity.remark != null  and entity.remark !=''">
				<![CDATA[ and wms_customer_.remark  LIKE CONCAT('%',#{entity.remark},'%')]]>
			</if>
			<if test="entity.userDefined1 != null  and entity.userDefined1 !=''">
				<![CDATA[ and wms_customer_.user_defined1  LIKE CONCAT('%',#{entity.userDefined1},'%')]]>
			</if>
			<if test="entity.userDefined2 != null  and entity.userDefined2 !=''">
				<![CDATA[ and wms_customer_.user_defined2  LIKE CONCAT('%',#{entity.userDefined2},'%')]]>
			</if>
			<if test="entity.userDefined3 != null  and entity.userDefined3 !=''">
				<![CDATA[ and wms_customer_.user_defined3  LIKE CONCAT('%',#{entity.userDefined3},'%')]]>
			</if>
			<if test="entity.userDefined4 != null  and entity.userDefined4 !=''">
				<![CDATA[ and wms_customer_.user_defined4  LIKE CONCAT('%',#{entity.userDefined4},'%')]]>
			</if>
			<if test="entity.userDefined5 != null  and entity.userDefined5 !=''">
				<![CDATA[ and wms_customer_.user_defined5  LIKE CONCAT('%',#{entity.userDefined5},'%')]]>
			</if>
			<if test="entity.createBy != null  and entity.createBy !=''">
				<![CDATA[ and wms_customer_.create_by  LIKE CONCAT('%',#{entity.createBy},'%')]]>
			</if>
			<if test="entity.gmtCreate != null  and entity.gmtCreate !=''">
				<![CDATA[ and wms_customer_.gmt_create  LIKE CONCAT('%',#{entity.gmtCreate},'%')]]>
			</if>
			<if test="entity.lastModifiedBy != null  and entity.lastModifiedBy !=''">
				<![CDATA[ and wms_customer_.last_modified_by  LIKE CONCAT('%',#{entity.lastModifiedBy},'%')]]>
			</if>
			<if test="entity.gmtModified != null  ">
				<![CDATA[ and wms_customer_.gmt_modified  LIKE CONCAT('%',#{entity.gmtModified},'%')]]>
			</if>
			<if test="entity.activeFlag != null  and entity.activeFlag !=''">
				<![CDATA[ and wms_customer_.active_flag  LIKE CONCAT('%',#{entity.activeFlag},'%')]]>
			</if>
		</if>
	</sql>
	
	<sql id="where_any">
		where 1=1
		<if test="entity!=null">
			<if test="entity.customerId != null  and entity.customerId !=''">
				<![CDATA[ and wms_customer_.customer_id  = #{entity.customerId}]]>
			</if>
			<if test="entity.customerCode != null  and entity.customerCode !=''">
				<![CDATA[ and wms_customer_.customer_code  = #{entity.customerCode}]]>
			</if>
			<if test="entity.customerFullName != null  and entity.customerFullName !=''">
				<![CDATA[ and wms_customer_.customer_full_name  = #{entity.customerFullName}]]>
			</if>
			<if test="entity.customerShortName != null  and entity.customerShortName !=''">
				<![CDATA[ and wms_customer_.customer_short_name  = #{entity.customerShortName}]]>
			</if>
			<if test="entity.customerEngName != null  and entity.customerEngName !=''">
				<![CDATA[ and wms_customer_.customer_eng_name  = #{entity.customerEngName}]]>
			</if>
			<if test="entity.customerType != null  and entity.customerType !=''">
				<![CDATA[ and wms_customer_.customer_type  = #{entity.customerType}]]>
			</if>
			<if test="entity.customerLevel != null  and entity.customerLevel !=''">
				<![CDATA[ and wms_customer_.customer_level  = #{entity.customerLevel}]]>
			</if>
			<if test="entity.firstContractDate != null  and entity.firstContractDate !=''">
				<![CDATA[ and wms_customer_.first_contract_date  = #{entity.firstContractDate}]]>
			</if>
			<if test="entity.endContractDate != null  and entity.endContractDate !=''">
				<![CDATA[ and wms_customer_.end_contract_date  = #{entity.endContractDate}]]>
			</if>
			<if test="entity.address != null  and entity.address !=''">
				<![CDATA[ and wms_customer_.address  = #{entity.address}]]>
			</if>
			<if test="entity.contacts != null  and entity.contacts !=''">
				<![CDATA[ and wms_customer_.contacts  = #{entity.contacts}]]>
			</if>
			<if test="entity.website != null  and entity.website !=''">
				<![CDATA[ and wms_customer_.website  = #{entity.website}]]>
			</if>
			<if test="entity.registrationDate != null  and entity.registrationDate !=''">
				<![CDATA[ and wms_customer_.registration_date  = #{entity.registrationDate}]]>
			</if>
			<if test="entity.remark != null  and entity.remark !=''">
				<![CDATA[ and wms_customer_.remark  = #{entity.remark}]]>
			</if>
			<if test="entity.userDefined1 != null  and entity.userDefined1 !=''">
				<![CDATA[ and wms_customer_.user_defined1  = #{entity.userDefined1}]]>
			</if>
			<if test="entity.userDefined2 != null  and entity.userDefined2 !=''">
				<![CDATA[ and wms_customer_.user_defined2  = #{entity.userDefined2}]]>
			</if>
			<if test="entity.userDefined3 != null  and entity.userDefined3 !=''">
				<![CDATA[ and wms_customer_.user_defined3  = #{entity.userDefined3}]]>
			</if>
			<if test="entity.userDefined4 != null  and entity.userDefined4 !=''">
				<![CDATA[ and wms_customer_.user_defined4  = #{entity.userDefined4}]]>
			</if>
			<if test="entity.userDefined5 != null  and entity.userDefined5 !=''">
				<![CDATA[ and wms_customer_.user_defined5  = #{entity.userDefined5}]]>
			</if>
			<if test="entity.createBy != null  and entity.createBy !=''">
				<![CDATA[ and wms_customer_.create_by  = #{entity.createBy}]]>
			</if>
			<if test="entity.gmtCreate != null  and entity.gmtCreate !=''">
				<![CDATA[ and wms_customer_.gmt_create  = #{entity.gmtCreate}]]>
			</if>
			<if test="entity.lastModifiedBy != null  and entity.lastModifiedBy !=''">
				<![CDATA[ and wms_customer_.last_modified_by  = #{entity.lastModifiedBy}]]>
			</if>
			<if test="entity.gmtModified != null  ">
				<![CDATA[ and wms_customer_.gmt_modified  = #{entity.gmtModified}]]>
			</if>
			<if test="entity.activeFlag != null  and entity.activeFlag !=''">
				<![CDATA[ and wms_customer_.active_flag  = #{entity.activeFlag}]]>
			</if>
		</if>
	</sql>
	
	<!-- =========================================================== -->
    <!-- DAO方法中的基本增删改查方法                                                                                                                                                           -->
    <!-- =========================================================== -->
   <!-- 根据id查询 -->
	<select id="queryById" resultMap="wmsCustomerMap" parameterType="java.lang.String">
		select
		<include refid="selectAllColumns" />
		<![CDATA[
		where wms_customer_.customer_id = #{id}
		]]>
	</select>
	
	<!-- 分页查询 -->
	<select id="queryList" resultMap="wmsCustomerMap" >
		select
		<if test="page!=null">
			<include refid="pagination_tail" />
		</if>
		<include refid="selectAllColumns"/>
		<include refid="where_fragement" />

	</select>
	
	<select id="queryCount" resultType="long">
		<include refid="count_Tail" />
		wms_customer wms_customer_
		<include refid="where_fragement" />
	</select>
	
	<!-- 插入记录 -->
	<insert id="create" parameterType="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
		<![CDATA[
		insert into wms_customer (
		    	 customer_id
		    	 ,customer_code
		    	 ,customer_full_name
		    	 ,customer_short_name
		    	 ,customer_eng_name
		    	 ,customer_type
		    	 ,customer_level
		    	 ,first_contract_date
		    	 ,end_contract_date
		    	 ,address
		    	 ,contacts
		    	 ,website
		    	 ,registration_date
		    	 ,remark
		    	 ,user_defined1
		    	 ,user_defined2
		    	 ,user_defined3
		    	 ,user_defined4
		    	 ,user_defined5
		    	 ,create_by
		    	 ,gmt_create
		    	 ,last_modified_by
		    	 ,gmt_modified
		    	 ,active_flag
		   )values(
		    	#{customerId}
		    	,#{customerCode}
		    	,#{customerFullName}
		    	,#{customerShortName}
		    	,#{customerEngName}
		    	,#{customerType}
		    	,#{customerLevel}
		    	,#{firstContractDate}
		    	,#{endContractDate}
		    	,#{address}
		    	,#{contacts}
		    	,#{website}
		    	,#{registrationDate}
		    	,#{remark}
		    	,#{userDefined1}
		    	,#{userDefined2}
		    	,#{userDefined3}
		    	,#{userDefined4}
		    	,#{userDefined5}
		    	,#{createBy}
		    	,#{gmtCreate}
		    	,#{lastModifiedBy}
		    	,#{gmtModified}
		    	,#{activeFlag}
		   )
	    ]]>	
	</insert>
	
	<!-- 批量插入记录 -->
	<insert id="batchInsert" parameterType="java.util.List">
		insert into wms_customer (
		    	 customer_id
		    	 ,customer_code
		    	 ,customer_full_name
		    	 ,customer_short_name
		    	 ,customer_eng_name
		    	 ,customer_type
		    	 ,customer_level
		    	 ,first_contract_date
		    	 ,end_contract_date
		    	 ,address
		    	 ,contacts
		    	 ,website
		    	 ,registration_date
		    	 ,remark
		    	 ,user_defined1
		    	 ,user_defined2
		    	 ,user_defined3
		    	 ,user_defined4
		    	 ,user_defined5
		    	 ,create_by
		    	 ,gmt_create
		    	 ,last_modified_by
		    	 ,gmt_modified
		    	 ,active_flag
		   )
		   values
		   <foreach collection="list" item="item" index="index" separator="," >
		   (
		    	#{item.customerId}
		    	,#{item.customerCode}
		    	,#{item.customerFullName}
		    	,#{item.customerShortName}
		    	,#{item.customerEngName}
		    	,#{item.customerType}
		    	,#{item.customerLevel}
		    	,#{item.firstContractDate}
		    	,#{item.endContractDate}
		    	,#{item.address}
		    	,#{item.contacts}
		    	,#{item.website}
		    	,#{item.registrationDate}
		    	,#{item.remark}
		    	,#{item.userDefined1}
		    	,#{item.userDefined2}
		    	,#{item.userDefined3}
		    	,#{item.userDefined4}
		    	,#{item.userDefined5}
		    	,#{item.createBy}
		    	,#{item.gmtCreate}
		    	,#{item.lastModifiedBy}
		    	,#{item.gmtModified}
		    	,#{item.activeFlag}
		   )
		   </foreach>	
	</insert>
	
	<!-- 根据id，修改记录 -->
	<update id="update" parameterType="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
		<![CDATA[
		update wms_customer set
   			
   			customer_code = #{customerCode}
   			,customer_full_name = #{customerFullName}
   			,customer_short_name = #{customerShortName}
   			,customer_eng_name = #{customerEngName}
   			,customer_type = #{customerType}
   			,customer_level = #{customerLevel}
   			,first_contract_date = #{firstContractDate}
   			,end_contract_date = #{endContractDate}
   			,address = #{address}
   			,contacts = #{contacts}
   			,website = #{website}
   			,registration_date = #{registrationDate}
   			,remark = #{remark}
   			,user_defined1 = #{userDefined1}
   			,user_defined2 = #{userDefined2}
   			,user_defined3 = #{userDefined3}
   			,user_defined4 = #{userDefined4}
   			,user_defined5 = #{userDefined5}
   			,create_by = #{createBy}
   			,gmt_create = #{gmtCreate}
   			,last_modified_by = #{lastModifiedBy}
   			,gmt_modified = #{gmtModified}
   			,active_flag = #{activeFlag}
		 where customer_id = #{customerId}
		]]>
	</update>
	
	<!--  -->
	<update id="updateBySelect" parameterType="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
		update wms_customer <set>
		<if test="entity!=null">
				<if test="entity.customerId != null  and entity.customerId !=''">
					
				</if>
				<if test="entity.customerCode != null  and entity.customerCode !=''">
					<![CDATA[ customer_code = #{entity.customerCode}, ]]>
				</if>
				<if test="entity.customerFullName != null  and entity.customerFullName !=''">
					<![CDATA[ customer_full_name = #{entity.customerFullName}, ]]>
				</if>
				<if test="entity.customerShortName != null  and entity.customerShortName !=''">
					<![CDATA[ customer_short_name = #{entity.customerShortName}, ]]>
				</if>
				<if test="entity.customerEngName != null  and entity.customerEngName !=''">
					<![CDATA[ customer_eng_name = #{entity.customerEngName}, ]]>
				</if>
				<if test="entity.customerType != null  and entity.customerType !=''">
					<![CDATA[ customer_type = #{entity.customerType}, ]]>
				</if>
				<if test="entity.customerLevel != null  and entity.customerLevel !=''">
					<![CDATA[ customer_level = #{entity.customerLevel}, ]]>
				</if>
				<if test="entity.firstContractDate != null  and entity.firstContractDate !=''">
					<![CDATA[ first_contract_date = #{entity.firstContractDate}, ]]>
				</if>
				<if test="entity.endContractDate != null  and entity.endContractDate !=''">
					<![CDATA[ end_contract_date = #{entity.endContractDate}, ]]>
				</if>
				<if test="entity.address != null  and entity.address !=''">
					<![CDATA[ address = #{entity.address}, ]]>
				</if>
				<if test="entity.contacts != null  and entity.contacts !=''">
					<![CDATA[ contacts = #{entity.contacts}, ]]>
				</if>
				<if test="entity.website != null  and entity.website !=''">
					<![CDATA[ website = #{entity.website}, ]]>
				</if>
				<if test="entity.registrationDate != null  and entity.registrationDate !=''">
					<![CDATA[ registration_date = #{entity.registrationDate}, ]]>
				</if>
				<if test="entity.remark != null  and entity.remark !=''">
					<![CDATA[ remark = #{entity.remark}, ]]>
				</if>
				<if test="entity.userDefined1 != null  and entity.userDefined1 !=''">
					<![CDATA[ user_defined1 = #{entity.userDefined1}, ]]>
				</if>
				<if test="entity.userDefined2 != null  and entity.userDefined2 !=''">
					<![CDATA[ user_defined2 = #{entity.userDefined2}, ]]>
				</if>
				<if test="entity.userDefined3 != null  and entity.userDefined3 !=''">
					<![CDATA[ user_defined3 = #{entity.userDefined3}, ]]>
				</if>
				<if test="entity.userDefined4 != null  and entity.userDefined4 !=''">
					<![CDATA[ user_defined4 = #{entity.userDefined4}, ]]>
				</if>
				<if test="entity.userDefined5 != null  and entity.userDefined5 !=''">
					<![CDATA[ user_defined5 = #{entity.userDefined5}, ]]>
				</if>
				<if test="entity.createBy != null  and entity.createBy !=''">
					<![CDATA[ create_by = #{entity.createBy}, ]]>
				</if>
				<if test="entity.gmtCreate != null  and entity.gmtCreate !=''">
					<![CDATA[ gmt_create = #{entity.gmtCreate}, ]]>
				</if>
				<if test="entity.lastModifiedBy != null  and entity.lastModifiedBy !=''">
					<![CDATA[ last_modified_by = #{entity.lastModifiedBy}, ]]>
				</if>
				<if test="entity.gmtModified != null  ">
					<![CDATA[ gmt_modified = #{entity.gmtModified}, ]]>
				</if>
				<if test="entity.activeFlag != null  and entity.activeFlag !=''">
					<![CDATA[ active_flag = #{entity.activeFlag}, ]]>
				</if>
		</if>
		</set>
		 where customer_id = #{entity.customerId}
	</update>

	   <!-- 逻辑删除,根据主键设置active_flag ='0' -->
	  <update id="delete" parameterType="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
	    UPDATE wms_customer
	    SET active_flag = "0"
	    ,last_modified_by = #{entity.lastModifiedBy}
	    ,gmt_modified = #{entity.gmtModified}
	     where customer_id = #{entity.customerId}
	  </update>
	  
	  <update id="batchDelete" parameterType="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
	    DELETE FROM wms_customer
	    where customer_id in 
	    <foreach collection="entity.customerIdList" index="index" item="item" open="(" separator="," close=")">
	      #{item}
	    </foreach>
	  </update>

	<!-- 任意字段全匹配 -->
	<select id="queryByAny" resultMap="wmsCustomerMap" >
		select
		<include refid="selectAllColumns"/>
		<include refid="where_any" />
	</select>

	<update id="deleteCustomer" parameterType="com.penghaisoft.wms.basicmanagement.model.entity.WmsCustomer">
		DELETE FROM wms_customer
		where customer_id = #{entity.customerId}
	</update>
</mapper>